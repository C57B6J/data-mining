.mode csv
SELECT "Total records", count(*) FROM awards;
SELECT "Inner ear", fiscal_year, count (*) FROM awards WHERE
(
  abstract_text LIKE "%cochlea%" 
  OR abstract_text LIKE "%inner hair cell%" 
  OR abstract_text LIKE "%outer hair cell%" 
  OR abstract_text LIKE "%auditory hair cell%"
  OR abstract_text LIKE "%basilar papilla%" 
  OR abstract_text LIKE "%stria vascular%" 
  OR abstract_text LIKE "%reissner%"
  OR abstract_text LIKE "%spiral gangli%"
  OR abstract_text LIKE "%auditory nerv%"
  OR abstract_text LIKE "%vestibular labyrinth%"
  OR abstract_text LIKE "%vestibular nerv%"
  OR abstract_text LIKE "%vestibular macula%"
  OR abstract_text LIKE "%vestibular epitheli%"
  OR abstract_text LIKE "%vestibular gangli%"
  OR abstract_text LIKE "%otolith%"
  OR abstract_text LIKE "%otoconi%"
  OR abstract_text LIKE "%semicircular %"
  OR abstract_text LIKE "%crista ampullaris%"
  OR abstract_text LIKE "%cupula%"
  OR abstract_text LIKE "% utric%"
  OR abstract_text LIKE "%saccul%"
  OR abstract_text LIKE "%organ of corti%")
    AND (abstract_text NOT LIKE "%prostatic%"
    AND abstract_text NOT LIKE "%laryngeal%")
      GROUP by fiscal_year;

SELECT "Auditory", fiscal_year, count (*) FROM awards WHERE (
  abstract_text LIKE "%cochlea%" 
  OR abstract_text LIKE "%outer hair cell%"
  OR abstract_text LIKE "%inner hair cell%" 
  OR abstract_text LIKE "%auditory hair cell%"
  OR abstract_text LIKE "%basilar papilla%" 
  OR abstract_text LIKE "%stria vascular%" 
  OR abstract_text LIKE "%reissner%"
  OR abstract_text LIKE "%spiral gangli%"
  OR abstract_text LIKE "%auditory nerv%"
  OR abstract_text LIKE "%organ of corti%")
    AND (abstract_text NOT LIKE "%prostatic%"
    AND abstract_text NOT LIKE "% utricl%"
    AND abstract_text NOT LIKE "%saccul%"
    AND abstract_text NOT LIKE "%laryngeal%"
    AND abstract_text NOT LIKE "%vestibular labyrinth%"
    AND abstract_text NOT LIKE "%vestibular epitheli%"
    AND abstract_text NOT LIKE "%vestibular gangli%"
    AND abstract_text NOT LIKE "%vestibular nerv%"
    AND abstract_text NOT LIKE "%semicircular %"
    AND abstract_text NOT LIKE "%cupula%"
    AND abstract_text NOT LIKE "%crista ampullaris%"
    AND abstract_text NOT LIKE "%vestibular macula%"
    AND abstract_text NOT LIKE "%otolith%"
    AND abstract_text NOT LIKE "%otoconi%")
      GROUP by fiscal_year;
SELECT "Vestibular", fiscal_year, count (*) FROM awards WHERE (
  abstract_text LIKE "%vestibular labyrinth%"
  OR abstract_text LIKE "%semicircular %"
  OR abstract_text LIKE "%vestibular macula%"
  OR abstract_text LIKE "%vestibular epitheli%"
  OR abstract_text LIKE "%vestibular gangli%"
  OR abstract_text LIKE "%vestibular nerv%"
  OR abstract_text LIKE "%otolith%"
  OR abstract_text LIKE "%otoconi%"
  OR abstract_text LIKE "%crista ampullaris%"
  OR abstract_text LIKE "%cupula%"
  OR abstract_text LIKE "% utric%"
  OR abstract_text LIKE "%saccul%")
    AND (abstract_text NOT LIKE "%prostatic%"
    AND abstract_text NOT LIKE "%laryngeal%"
    AND abstract_text NOT LIKE "%cochlea%"
    AND abstract_text NOT LIKE "%inner hair cell%"
    AND abstract_text NOT LIKE "%outer hair cell%"
    AND abstract_text NOT LIKE "%auditory hair cell%"
    AND abstract_text NOT LIKE "%organ of corti%"
    AND abstract_text NOT LIKE "%basilar papilla%" 
    AND abstract_text NOT LIKE "%stria vascular%" 
    AND abstract_text NOT LIKE "%basilar membrane%"
    AND abstract_text NOT LIKE "%reissner%"
    AND abstract_text NOT LIKE "%spiral gangli%"
    AND abstract_text NOT LIKE "%auditory nerv%")
      GROUP by fiscal_year;
SELECT "Not either auditory or vestibular", fiscal_year, count (*) FROM awards WHERE (
 abstract_text NOT LIKE "%cochlea%" 
    AND abstract_text NOT LIKE "%semicircular %"
    AND abstract_text NOT LIKE "%vestibular macula%"
    AND abstract_text NOT LIKE "%vestibular epitheli%"
    AND abstract_text NOT LIKE "%vestibular labyrinth%"
    AND abstract_text NOT LIKE "%vestibular gangli%"
    AND abstract_text NOT LIKE "%vestibular nerv%"
    AND abstract_text NOT LIKE "%otolith%"
    AND abstract_text NOT LIKE "%otoconi%"
    AND abstract_text NOT LIKE "%crista ampullaris%"
    AND abstract_text NOT LIKE "%cupula%"
    AND abstract_text NOT LIKE "% utric%"
    AND abstract_text NOT LIKE "%saccul%"
    AND abstract_text NOT LIKE "%cochlea%"
    AND abstract_text NOT LIKE "%inner hair cell%"
    AND abstract_text NOT LIKE "%outer hair cell%"
    AND abstract_text NOT LIKE "%auditory hair cell%"
    AND abstract_text NOT LIKE "%basilar papilla%" 
    AND abstract_text NOT LIKE "%stria vascular%" 
    AND abstract_text NOT LIKE "%basilar membrane%"
    AND abstract_text NOT LIKE "%reissner%"
    AND abstract_text NOT LIKE "%spiral gangli%"
    AND abstract_text NOT LIKE "%auditory nerv%"
    AND abstract_text NOT LIKE "%prostatic%"
    AND abstract_text NOT LIKE "%laryngeal%"
    AND abstract_text NOT LIKE "%organ of corti%")
      GROUP by fiscal_year;
SELECT "Sum of total amounts by year for all inner ear grants", fiscal_year, SUM (award_amount) FROM awards WHERE
(
  abstract_text LIKE "%cochlea%" 
  OR abstract_text LIKE "%inner hair cell%"
  OR abstract_text LIKE "%outer hair cell%" 
  OR abstract_text LIKE "%auditory hair cell%"
  OR abstract_text LIKE "%basilar papilla%" 
  OR abstract_text LIKE "%stria vascular%" 
  OR abstract_text LIKE "%reissner%"
  OR abstract_text LIKE "%spiral gangli%"
  OR abstract_text LIKE "%auditory nerv%"
  OR abstract_text LIKE "%vestibular labyrinth%"
  OR abstract_text LIKE "%vestibular gangli%"
  OR abstract_text LIKE "%vestibular nerv%"
  OR abstract_text LIKE "%semicircular %"
  OR abstract_text LIKE "%vestibular macula%"
  OR abstract_text LIKE "%otolith%"
  OR abstract_text LIKE "%otoconi%"
  OR abstract_text LIKE "%crista ampullaris%"
  OR abstract_text LIKE "%cupula%"
  OR abstract_text LIKE "% utric%"
  OR abstract_text LIKE "%saccul%"
  OR abstract_text LIKE "%organ of corti%")
    AND (abstract_text NOT LIKE "%prostatic%"
    AND abstract_text NOT LIKE "%laryngeal%")
    GROUP by fiscal_year;
 
SELECT "Total award amounts by year for only grants with auditory terms",
fiscal_year, SUM (award_amount) FROM awards WHERE
(
  abstract_text LIKE "%cochlea%" 
  OR abstract_text LIKE "%inner hair cell%"
  OR abstract_text LIKE "%outer hair cell%" 
  OR abstract_text LIKE "%auditory hair cell%"
  OR abstract_text LIKE "%basilar papilla%" 
  OR abstract_text LIKE "%stria vascular%" 
  OR abstract_text LIKE "%reissner%"
  OR abstract_text LIKE "%spiral gangli%"
  OR abstract_text LIKE "%auditory nerv%"
  OR abstract_text LIKE "%organ of corti%")
    AND (abstract_text NOT LIKE "%prostatic%"
    AND abstract_text NOT LIKE "% utricl%"
    AND abstract_text NOT LIKE "%saccul%"
    AND abstract_text NOT LIKE "%laryngeal%"
    AND abstract_text NOT LIKE "%vestibular labyrinth%"
    AND abstract_text NOT LIKE "%vestibular gangli%"
    AND abstract_text NOT LIKE "%vestibular nerv%"
    AND abstract_text NOT LIKE "%semicircular %"
    AND abstract_text NOT LIKE "%vestibular macula%"
    AND abstract_text NOT LIKE "%otolith%"
    AND abstract_text NOT LIKE "%otoconi%"
    AND abstract_text NOT LIKE "%crista ampullaris%"
    AND abstract_text NOT LIKE "%cupula%")
      GROUP by fiscal_year;
#Sum of total award amounts by year for grants only containing vestibular terms
SELECT "Sum of total award amounts by year for only grants with vestibular terms",
fiscal_year, SUM (award_amount) FROM awards WHERE (
  abstract_text LIKE "%vestibular labyrinth%"
  OR abstract_text LIKE "%semicircular %"
  OR abstract_text LIKE "%vestibular macula%"
  OR abstract_text LIKE "%vestibular gangli%"
  OR abstract_text LIKE "%vestibular nerv%"
  OR abstract_text LIKE "%vestibular epitheli%"
  OR abstract_text LIKE "%otolith%"
  OR abstract_text LIKE "%otoconi%"
  OR abstract_text LIKE "%cupula%"
  OR abstract_text LIKE "%crista ampullaris%"
  OR abstract_text LIKE "% utric%"
  OR abstract_text LIKE "%saccul%")
    AND (abstract_text NOT LIKE "%prostatic%"
    AND abstract_text NOT LIKE "%laryngeal%"
    AND abstract_text NOT LIKE "%cochlea%"
    AND abstract_text NOT LIKE "%outer hair cell%" 
    AND abstract_text NOT LIKE "%auditory hair cell%"
    AND abstract_text NOT LIKE "%organ of corti%"
    AND abstract_text NOT LIKE "%basilar papilla%" 
    AND abstract_text NOT LIKE "%stria vascular%" 
    AND abstract_text NOT LIKE "%basilar membrane%"
    AND abstract_text NOT LIKE "%reissner%"
    AND abstract_text NOT LIKE "%spiral gangli%"
    AND abstract_text NOT LIKE "%auditory nerv%")
       GROUP by fiscal_year;

SELECT "Sum of total award amounts by year for grants with neither auditory nor vestibular",
fiscal_year, SUM (award_amount) FROM awards WHERE (
     abstract_text NOT LIKE "%cochlea%" 
    AND abstract_text NOT LIKE "%semicircular %"
    AND abstract_text NOT LIKE "%cupula%"
    AND abstract_text NOT LIKE "%vestibular macula%"
    AND abstract_text NOT LIKE "%vestibular gangli%"
    AND abstract_text NOT LIKE "%vestibular nerv%"
    AND abstract_text NOT LIKE "%vestibular epitheli%"
    AND abstract_text NOT LIKE "%otolith%"
    AND abstract_text NOT LIKE "%otoconi%"
    AND abstract_text NOT LIKE "%crista ampullaris%"
    AND abstract_text NOT LIKE "% utric%"
    AND abstract_text NOT LIKE "%saccul%"
    AND abstract_text NOT LIKE "%cochlea%"
    AND abstract_text NOT LIKE "%outer hair cell%" 
    AND abstract_text NOT LIKE "%auditory hair cell%"
    AND abstract_text NOT LIKE "%basilar papilla%" 
    AND abstract_text NOT LIKE "%stria vascular%" 
    AND abstract_text NOT LIKE "%basilar membrane%"
    AND abstract_text NOT LIKE "%reissner%"
    AND abstract_text NOT LIKE "%spiral gangli%"
    AND abstract_text NOT LIKE "%auditory nerv%"
    AND abstract_text NOT LIKE "%prostatic%"
    AND abstract_text NOT LIKE "%laryngeal%"
    AND abstract_text NOT LIKE "%organ of corti%")
     GROUP by fiscal_year;
